{"version":3,"sources":["../../client/app/components/attendance-list/attendance-list.component.ts"],"names":[],"mappings":"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","file":"attendance-list.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CourseService } from \"../../services/course.service\";\r\nimport { Course } from \"../../models/course\";\r\nimport { Student } from \"../../models/Student\";\r\nimport { StudentService } from \"../../services/student.service\";\r\nimport { StaffService } from \"../../services/staff.service\";\r\ndeclare var swal: any;\r\ndeclare var moment;\r\n\r\n@Component({\r\n    selector: 'attendanceList',\r\n    templateUrl: './app/components/attendance-list/attendance-list.component.html',\r\n    styleUrls: ['./app/components/attendance-list/attendance-list.component.css']\r\n})\r\n\r\nexport class AttendanceListComponent implements OnInit {\r\n    data: any;\r\n    date: any;\r\n    courseID: any;\r\n    attendanceView: boolean = false;\r\n    loading: boolean = false;\r\n    attendanceCourse: any;\r\n    attendanceStudents: any;\r\n    timetables: any;\r\n    attendance: any;\r\n    absentStudents = [];\r\n    attendanceDates: any[] = [];\r\n    previousAttendance: any;\r\n    instructors: any;\r\n    instructorOptions: any = {};\r\n    selectedInstructor: number;\r\n\r\n    constructor(private router: Router, private CourseService: CourseService, private StudentService: StudentService, private StaffService: StaffService) {\r\n      this.date = new Date();\r\n    }\r\n\r\n    ngOnInit() {\r\n      swal({\r\n        title: 'Loading...',\r\n        allowOutsideClick: false\r\n      });\r\n      swal.showLoading();\r\n      var currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n      var userID = currentUser.userID;\r\n      if (currentUser.userType !== 'Instructor') {\r\n        this.StaffService\r\n            .getUsers()\r\n            .then(instructors => {\r\n                this.instructors = instructors.filter(x => x.userType === 'Instructor');\r\n            })\r\n            .catch(error => {\r\n              // do something\r\n            });\r\n            swal.close();\r\n      } else {\r\n        this.getCourses(userID);\r\n        this.StudentService\r\n            .getAllAttendance()\r\n            .then(attendance => {\r\n                if (attendance.status === \"403\") {\r\n                    this.previousAttendance = null;\r\n                } else {\r\n                    this.previousAttendance = attendance;\r\n                    for (let item of this.previousAttendance) {\r\n                      item.date = item.date[0] + \" \" + item.date[1];\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => console.log(error));\r\n            swal.close();\r\n      }\r\n    }\r\n\r\n    instructorSelect() {\r\n      this.attendanceDates = [];\r\n      this.attendanceView = null;\r\n      swal({\r\n        title: 'Loading...',\r\n        allowOutsideClick: false\r\n      });\r\n      swal.showLoading();\r\n      this.getCourses(this.selectedInstructor);\r\n      this.StudentService\r\n          .getAllAttendance()\r\n          .then(attendance => {\r\n              if (attendance.status === \"403\") {\r\n                  this.previousAttendance = null;\r\n              } else {\r\n                  this.previousAttendance = attendance;\r\n                  for (let item of this.previousAttendance) {\r\n                    item.date = item.date[0] + \" \" + item.date[1];\r\n                  }\r\n              }\r\n              swal.close();\r\n          })\r\n          .catch(error => console.log(error));\r\n    }\r\n\r\n    getCourses(instructorID) {\r\n        this.CourseService\r\n            .getInstructorCourses(instructorID)\r\n            .then(result => {\r\n                var isEmpty = (result || []).length === 0;\r\n                if (isEmpty || result.status === \"403\") {\r\n                    console.log(result);\r\n                    this.data = null;\r\n                } else {\r\n                    this.data = result;\r\n                }\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n\r\n    doAttendance(course: Course) {\r\n      this.attendanceDates = [];\r\n      swal({\r\n        title: 'Loading...',\r\n        allowOutsideClick: false\r\n      });\r\n      swal.showLoading();\r\n      this.previousAttendance = this.previousAttendance.filter(x => x.courseID === course.courseID);\r\n      this.courseID = course.courseID;\r\n      this.StudentService\r\n          .getTimetablesByCourseId(course.courseID)\r\n          .then(result => {\r\n              var isEmpty = (result || []).length === 0;\r\n              if (isEmpty || result.status === \"403\") {\r\n                  this.timetables = null;\r\n                  this.attendanceStudents = null;\r\n                  swal.close();\r\n              } else {\r\n                  this.timetables = result;\r\n                  this.getStudentsById(this.timetables);\r\n              }\r\n          })\r\n          .catch(error => console.log(error));\r\n\r\n      this.attendanceCourse = course;\r\n      var array = this.attendanceCourse.classTimeStr.split(',');\r\n      for (let item of array) {\r\n        var attendanceHistory = this.previousAttendance;\r\n        attendanceHistory = attendanceHistory.filter(x => x.date === item);\r\n        if (attendanceHistory.length !== 0) {\r\n          console.log(\"Attendance already taken\");\r\n        } else {\r\n          var date = item.split(' ');\r\n          var formattedDate = moment(date[0]).format(\"ddd, MMM Do YYYY\");\r\n          var list = {\r\n            label: formattedDate + ' from ' + date[1],\r\n            value: date[0] + ' ' + date[1]\r\n          };\r\n          this.attendanceDates.push(list);\r\n        }\r\n      }\r\n      this.attendanceView = true;\r\n    }\r\n\r\n    getStudentsById(timetables) {\r\n      console.log(timetables);\r\n      this.StudentService\r\n          .getStudentsById(timetables)\r\n          .then(result => {\r\n              var isEmpty = (result || []).length === 0;\r\n              if (isEmpty || result.status === \"error\") {\r\n                  this.attendanceStudents = null;\r\n              } else {\r\n                  this.attendanceStudents = result;\r\n                  for (let student of this.attendanceStudents) {\r\n                    student.fullName = student.firstName + \" \" + student.lastName;\r\n                  }\r\n              }\r\n              swal.close();\r\n          })\r\n          .catch(error => console.log(error));\r\n    }\r\n\r\n    // markAbsent(student: Student) {\r\n    //   if (student.absent) {\r\n    //     student.absent = false;\r\n    //     var index = this.absentStudents.indexOf(student.studentID);\r\n    //     this.absentStudents.splice(index, 1);\r\n    //   } else {\r\n    //     student.absent = true;\r\n    //     this.absentStudents.push(student.studentID);\r\n    //   }\r\n    //   console.log(this.absentStudents);\r\n    // }\r\n\r\n    submitAttendance() {\r\n      var count = 0;\r\n      for (let student of this.attendanceStudents) {\r\n        if (student.attendanceValue) {\r\n          count++;\r\n        }\r\n      }\r\n\r\n      if (!this.attendanceCourse.attendanceDate) {\r\n        console.log(this.attendanceCourse);\r\n        swal(\r\n            'Attendance Incomplete',\r\n            'Please enter an attendance date',\r\n            'warning'\r\n        );\r\n      } else if (count === this.attendanceStudents.length && this.attendanceCourse.attendanceDate) {\r\n        swal({\r\n            title: 'Submit Attendance?',\r\n            text: \"You won't be able to revert this!\",\r\n            type: 'info',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, submit!'\r\n        }).then(isConfirm => {\r\n          if (isConfirm.dismiss === \"cancel\" || isConfirm.dismiss === \"overlay\") {\r\n            console.log(isConfirm.dismiss);\r\n          } else if (isConfirm) {\r\n            this.attendance = {\r\n              students: this.attendanceStudents,\r\n              courseID: this.courseID,\r\n              date: this.attendanceCourse.attendanceDate\r\n            };\r\n            this.StudentService\r\n                .insertAttendance(this.attendance)\r\n                .then(result => {\r\n                  swal(\r\n                      'Attendance submitted!',\r\n                      '',\r\n                      'success'\r\n                  );\r\n                  this.attendanceView = false;\r\n                  this.router.navigate(['/attendance-report']);\r\n                })\r\n                .catch(error => console.log(error));\r\n          }\r\n        }).catch(error => {\r\n          console.log(error);\r\n        });\r\n      } else {\r\n        swal(\r\n            'Attendance Incomplete',\r\n            'Please enter attendance for all students',\r\n            'warning'\r\n        );\r\n      }\r\n\r\n    }\r\n\r\n    goBack() {\r\n        window.history.back();\r\n    }\r\n}\r\n"]}