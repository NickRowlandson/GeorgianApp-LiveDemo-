{"version":3,"sources":["../../client/app/components/attendance-report/attendance-report.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAiDE,mCAAuC,QAAkB,EAAU,MAAc,EAAU,cAA8B,EAAU,aAA4B;oBAAxH,aAAQ,GAAR,QAAQ,CAAU;oBAAU,WAAM,GAAN,MAAM,CAAQ;oBAAU,mBAAc,GAAd,cAAc,CAAgB;oBAAU,kBAAa,GAAb,aAAa,CAAe;oBA3B/J,0BAAqB,GAAY,KAAK,CAAC;oBAGvC,YAAO,GAAG,EAAE,CAAC;oBACb,kBAAa,GAAG,EAAE,CAAC;oBAInB,iBAAY,GAAY,KAAK,CAAC;oBAE9B,kBAAa,GAAY,KAAK,CAAC;oBAI/B,yBAAoB,GAAY,KAAK,CAAC;oBAOtC,uBAAkB,GAAY,KAAK,CAAC;gBAQpC,CAAC;gBAED,4CAAQ,GAAR;oBAAA,iBAkBC;oBAjBC,IAAI,CAAC;wBACH,KAAK,EAAE,YAAY;wBACnB,iBAAiB,EAAE,KAAK;qBACzB,CAAC,CAAC;oBACH,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,cAAc;yBAChB,gBAAgB,EAAE;yBAClB,IAAI,CAAC,UAAA,UAAU;wBACd,IAAK,UAAkB,CAAC,MAAM,KAAK,OAAO,EAAE;4BAC1C,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;4BACjB,KAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;yBACpC;6BAAM;4BACL,KAAI,CAAC,IAAI,GAAG,UAAU,CAAC;4BACvB,KAAI,CAAC,WAAW,EAAE,CAAC;yBACpB;oBACH,CAAC,CAAC;yBACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAAC,CAAC;gBACxC,CAAC;gBAED,+CAAW,GAAX;oBAAA,iBAgBC;oBAfC,IAAI,CAAC,cAAc;yBAChB,WAAW,EAAE;yBACb,IAAI,CAAC,UAAA,QAAQ;wBACZ,IAAK,QAAgB,CAAC,MAAM,KAAK,OAAO,EAAE;4BACxC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;4BACrB,KAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;yBAClC;6BAAM;4BACL,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;4BACzB,KAAoB,UAAa,EAAb,KAAA,KAAI,CAAC,QAAQ,EAAb,cAAa,EAAb,IAAa;gCAA5B,IAAI,OAAO,SAAA;gCACd,OAAO,CAAC,QAAQ,GAAG,OAAO,CAAC,SAAS,GAAG,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC;6BAC/D;4BACD,KAAI,CAAC,UAAU,EAAE,CAAC;yBACnB;oBACH,CAAC,CAAC;yBACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAAC,CAAC;gBACxC,CAAC;gBAED,8CAAU,GAAV;oBAAA,iBAoBC;oBAnBC,IAAI,CAAC,aAAa;yBACf,UAAU,EAAE;yBACZ,IAAI,CAAC,UAAA,MAAM;wBACV,IAAK,MAAc,CAAC,MAAM,KAAK,OAAO,EAAE;4BACtC,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;4BACpB,KAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;yBAChC;6BAAM;4BACL,iBAAiB;4BACjB,MAAM,CAAC,OAAO,CAAC,UAAC,IAAI;gCAClB,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;gCACjE,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;gCAC7D,uEAAuE;gCACvE,mEAAmE;4BACrE,CAAC,CAAC,CAAC;4BACH,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;4BACtB,KAAI,CAAC,aAAa,EAAE,CAAC;yBACtB;oBACH,CAAC,CAAC;yBACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAAC,CAAC;gBACxC,CAAC;gBAED,iDAAa,GAAb;oBAAA,iBAaC;oBAZC,IAAI,CAAC,cAAc;yBAChB,aAAa,EAAE;yBACf,IAAI,CAAC,UAAA,MAAM;wBACV,IAAK,MAAc,CAAC,MAAM,KAAK,OAAO,EAAE;4BACtC,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;4BACvB,KAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;yBAChC;6BAAM;4BACL,KAAI,CAAC,UAAU,GAAG,MAAM,CAAC;4BACzB,IAAI,CAAC,KAAK,EAAE,CAAC;yBACd;oBACH,CAAC,CAAC;yBACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAAC,CAAC;gBACxC,CAAC;gBAED,qDAAiB,GAAjB,UAAkB,OAAgB;oBAChC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;oBAClB,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;oBAClC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,EAA3B,CAA2B,CAAC,CAAC;oBACrE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAS,CAAC,EAAE,CAAC;wBAChC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;wBACrB,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;wBACrB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,CAAC,CAAC,CAAC;oBACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,SAAS,KAAK,OAAO,CAAC,SAAS,EAAjC,CAAiC,CAAC,CAAC;oBAC5E,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,eAAe,KAAK,GAAG,EAAzB,CAAyB,CAAC,CAAC,MAAM,CAAC;oBAClF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,eAAe,KAAK,GAAG,EAAzB,CAAyB,CAAC,CAAC,MAAM,CAAC;oBACjF,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,eAAe,KAAK,IAAI,EAA1B,CAA0B,CAAC,CAAC,MAAM,CAAC;oBAEvF,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;wBAChC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;qBAC1B;yBAAM;wBACL,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gDACjB,IAAI;4BACP,MAAM,GAAG,OAAK,OAAO,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,EAA5B,CAA4B,CAAC,CAAC;4BAChE,UAAU,GAAG;gCACf,MAAM,EAAE,MAAM;gCACd,IAAI,EAAE,IAAI,CAAC,IAAI;gCACf,eAAe,EAAE,IAAI,CAAC,eAAe;6BACtC,CAAC;4BACF,OAAK,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;wBAChC,CAAC;2CAPK,MAAM,EACN,UAAU;wBAFhB,KAAiB,UAAe,EAAf,KAAA,IAAI,CAAC,UAAU,EAAf,cAAe,EAAf,IAAe;4BAA3B,IAAI,IAAI,SAAA;oCAAJ,IAAI;yBAQZ;wBACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC;qBACnC;oBACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,CAAC;gBAED,oDAAgB,GAAhB,UAAiB,MAAc;oBAC7B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;oBAC3B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;oBACzB,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;oBACjC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;oBACrB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;oBAE7C,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,IAAI,CAAC,CAAC,eAAe,KAAK,GAAG,EAA3D,CAA2D,CAAC,CAAC,MAAM,CAAC;oBACnH,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,IAAI,CAAC,CAAC,eAAe,KAAK,GAAG,EAA3D,CAA2D,CAAC,CAAC,MAAM,CAAC;oBACpH,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,IAAI,CAAC,CAAC,eAAe,KAAK,IAAI,EAA5D,CAA4D,CAAC,CAAC,MAAM,CAAC;oBAExH,IAAI,IAAI,CAAC,YAAY,EAAE;wBACrB,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACzC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;wBACvB,KAAiB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK;4BAAjB,IAAI,IAAI,cAAA;4BACX,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;4BAC3B,qBAAqB;4BACrB,sBAAsB;4BACtB,sCAAsC;4BACtC,oCAAoC;4BACpC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;yBAC9B;qBACF;oBAED,IAAI,WAAW,CAAC;oBAEhB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;wBAC1B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;qBAC1B;yBAAM;wBACL,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;wBAC1B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,EAA9B,CAA8B,CAAC,CAAC;gDAC3E,IAAI;4BACX,WAAW,GAAG;gCACZ,OAAO,EAAE,OAAK,QAAQ,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,EAAxB,CAAwB,CAAC,CAAC,CAAC,CAAC;gCAC/D,SAAS,EAAE,IAAI,CAAC,SAAS;gCACzB,OAAO,EAAE,IAAI,CAAC,OAAO;gCACrB,cAAc,EAAE,OAAK,IAAI,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,EAA1D,CAA0D,CAAC;6BAClG,CAAC;4BACF,OAAK,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBACxC,CAAC;;wBARD,KAAiB,UAAqB,EAArB,KAAA,IAAI,CAAC,gBAAgB,EAArB,cAAqB,EAArB,IAAqB;4BAAjC,IAAI,IAAI,SAAA;oCAAJ,IAAI;yBAQZ;qBACF;oBAED,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE;wBACpC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;qBAChC;yBAAM;wBACL,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;qBACjC;oBACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,CAAC;gBAED,oDAAgB,GAAhB,UAAiB,QAAQ;oBACvB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC;oBAClC,IAAI,QAAQ,KAAK,SAAS,EAAE;wBAC1B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,eAAe,KAAK,GAAG,EAAzB,CAAyB,CAAC,CAAC;qBACpE;yBAAM,IAAI,QAAQ,KAAK,UAAU,EAAE;wBAClC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,eAAe,KAAK,GAAG,EAAzB,CAAyB,CAAC,CAAC;qBACpE;yBAAM,IAAI,QAAQ,KAAK,aAAa,EAAE;wBACrC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,eAAe,KAAK,IAAI,EAA1B,CAA0B,CAAC,CAAC;qBACrE;gBACH,CAAC;gBAED,iDAAa,GAAb;oBACE,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;oBAClC,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;oBACnC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gBAC5B,CAAC;gBAED,qDAAiB,GAAjB,UAAkB,KAAK;oBACrB,IAAI,CACF,KAAK,CAAC,KAAK,EACX,KAAK,CAAC,GAAG,EACT,OAAO,CACR,CAAC;gBACJ,CAAC;gBAED,0CAAM,GAAN;oBACE,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACxB,CAAC;gBA9NU,yBAAyB;oBANrC,gBAAS,CAAC;wBACT,QAAQ,EAAE,0BAA0B;wBACpC,WAAW,EAAE,qEAAqE;wBAClF,SAAS,EAAE,CAAC,oEAAoE,CAAC;qBAClF,CAAC;oBAmCc,WAAA,aAAM,CAAC,2BAAQ,CAAC,CAAA;qDAAmB,QAAQ,EAAkB,eAAM,EAA0B,gCAAc,EAAyB,8BAAa;mBAjCpJ,yBAAyB,CA+NrC;gBAAD,gCAAC;aA/ND,AA+NC;;QACD,CAAC","file":"attendance-report.component.js","sourcesContent":["import { Component, OnInit, Inject } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { StudentService } from \"../../services/student.service\";\r\nimport { Student } from \"../../models/student\";\r\nimport { CourseService } from \"../../services/course.service\";\r\nimport { Course } from \"../../models/course\";\r\nimport { DOCUMENT } from '@angular/platform-browser';\r\ndeclare var moment: any;\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n  selector: 'attendanceReportComponet',\r\n  templateUrl: './app/components/attendance-report/attendance-report.component.html',\r\n  styleUrls: ['./app/components/attendance-report/attendance-report.component.css']\r\n})\r\n\r\nexport class AttendanceReportComponent implements OnInit {\r\n  data: any;\r\n  courses: Course[];\r\n  students: Student[];\r\n  totalAbsences: any;\r\n\r\n  studentAttendanceView: boolean = false;\r\n  student: any[];\r\n  attendance: any[];\r\n  records = [];\r\n  recordsBackup = [];\r\n  totalPresent: any;\r\n  totalAbsent: any;\r\n  totalMadeContact: any;\r\n  noAttendance: boolean = false;\r\n\r\n  studentReport: boolean = false;\r\n\r\n  timetables: any[];\r\n\r\n  courseAttendanceView: boolean = false;\r\n  course: any;\r\n  classTimeStr: any;\r\n  courseData: any[];\r\n  courseStudents: any[];\r\n  courseTimetables: any[];\r\n  studentRecord: any[];\r\n  noStudentsEnrolled: boolean = false;\r\n\r\n  classAbsenceTotal: any;\r\n  classPresenceTotal: any;\r\n  classMadeContactTotal: any;\r\n\r\n  constructor( @Inject(DOCUMENT) private document: Document, private router: Router, private studentService: StudentService, private courseService: CourseService) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    swal({\r\n      title: 'Loading...',\r\n      allowOutsideClick: false\r\n    });\r\n    swal.showLoading();\r\n    this.studentService\r\n      .getAllAttendance()\r\n      .then(attendance => {\r\n        if ((attendance as any).result === 'error') {\r\n          this.data = null;\r\n          this.displayErrorAlert(attendance);\r\n        } else {\r\n          this.data = attendance;\r\n          this.getStudents();\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n\r\n  getStudents() {\r\n    this.studentService\r\n      .getStudents()\r\n      .then(students => {\r\n        if ((students as any).result === 'error') {\r\n          this.students = null;\r\n          this.displayErrorAlert(students);\r\n        } else {\r\n          this.students = students;\r\n          for (let student of this.students) {\r\n            student.fullName = student.firstName + \" \" + student.lastName;\r\n          }\r\n          this.getCourses();\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n\r\n  getCourses() {\r\n    this.courseService\r\n      .getCourses()\r\n      .then(result => {\r\n        if ((result as any).result === 'error') {\r\n          this.courses = null;\r\n          this.displayErrorAlert(result);\r\n        } else {\r\n          //format datetime\r\n          result.forEach((item) => {\r\n            item.courseStart = moment(item.courseStart).format('YYYY-MM-DD');\r\n            item.courseEnd = moment(item.courseEnd).format('YYYY-MM-DD');\r\n            // item.classStartTime = moment(item.classStartTime).format('hh:mm A');\r\n            // item.classEndTime = moment(item.classEndTime).format('hh:mm A');\r\n          });\r\n          this.courses = result;\r\n          this.getTimetables();\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n\r\n  getTimetables() {\r\n    this.studentService\r\n      .getTimetables()\r\n      .then(result => {\r\n        if ((result as any).result === 'error') {\r\n          this.timetables = null;\r\n          this.displayErrorAlert(result);\r\n        } else {\r\n          this.timetables = result;\r\n          swal.close();\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n\r\n  viewStudentReport(student: Student) {\r\n    this.records = [];\r\n    this.studentAttendanceView = true;\r\n    this.attendance = this.data.filter(x => x.userID === student.userID);\r\n    this.attendance.sort(function(a, b) {\r\n      a = new Date(a.date);\r\n      b = new Date(b.date);\r\n      return a > b ? -1 : a < b ? 1 : 0;\r\n    });\r\n    this.student = this.students.filter(x => x.studentID === student.studentID);\r\n    this.student = this.student[0];\r\n    this.totalPresent = this.attendance.filter(x => x.attendanceValue === 'P').length;\r\n    this.totalAbsent = this.attendance.filter(x => x.attendanceValue === 'A').length;\r\n    this.totalMadeContact = this.attendance.filter(x => x.attendanceValue === 'MC').length;\r\n\r\n    if (this.attendance.length === 0) {\r\n      this.noAttendance = true;\r\n    } else {\r\n      this.noAttendance = false;\r\n      for (let item of this.attendance) {\r\n        var course = this.courses.filter(x => x.courseID === item.courseID);\r\n        var attendance = {\r\n          course: course,\r\n          date: item.date,\r\n          attendanceValue: item.attendanceValue\r\n        };\r\n        this.records.push(attendance);\r\n      }\r\n      this.recordsBackup = this.records;\r\n    }\r\n    this.document.body.scrollTop = 0;\r\n  }\r\n\r\n  viewCourseReport(course: Course) {\r\n    this.courseTimetables = [];\r\n    this.courseStudents = [];\r\n    this.courseAttendanceView = true;\r\n    this.course = course;\r\n    this.classTimeStr = this.course.classTimeStr;\r\n\r\n    this.classAbsenceTotal = this.data.filter(x => x.courseID === course.courseID && x.attendanceValue === 'A').length;\r\n    this.classPresenceTotal = this.data.filter(x => x.courseID === course.courseID && x.attendanceValue === 'P').length;\r\n    this.classMadeContactTotal = this.data.filter(x => x.courseID === course.courseID && x.attendanceValue === 'MC').length;\r\n\r\n    if (this.classTimeStr) {\r\n      var array = this.classTimeStr.split(',');\r\n      this.classTimeStr = [];\r\n      for (let item of array) {\r\n        var date = item.split(' ');\r\n        // var day = date[0];\r\n        // var time = date[1];\r\n        // var startTime = time.split('-')[0];\r\n        // var endTime = time.split('-')[1];\r\n        this.classTimeStr.push(date);\r\n      }\r\n    }\r\n\r\n    var studentInfo;\r\n\r\n    if (this.data.length === 0) {\r\n      this.noAttendance = true;\r\n    } else {\r\n      this.noAttendance = false;\r\n      this.courseTimetables = this.timetables.filter(x => x.courseID === course.courseID);\r\n      for (let item of this.courseTimetables) {\r\n        studentInfo = {\r\n          student: this.students.filter(x => x.userID === item.userID)[0],\r\n          startDate: item.startDate,\r\n          endDate: item.endDate,\r\n          attendanceInfo: this.data.filter(x => x.userID === item.userID && x.courseID === course.courseID)\r\n        };\r\n        this.courseStudents.push(studentInfo);\r\n      }\r\n    }\r\n\r\n    if (this.courseStudents.length === 0) {\r\n      this.noStudentsEnrolled = true;\r\n    } else {\r\n      this.noStudentsEnrolled = false;\r\n    }\r\n    this.document.body.scrollTop = 0;\r\n  }\r\n\r\n  filterAttendance(filterBy) {\r\n    this.records = this.recordsBackup;\r\n    if (filterBy === 'absence') {\r\n      this.records = this.records.filter(x => x.attendanceValue === 'A');\r\n    } else if (filterBy === 'presence') {\r\n      this.records = this.records.filter(x => x.attendanceValue === 'P');\r\n    } else if (filterBy === 'madeContact') {\r\n      this.records = this.records.filter(x => x.attendanceValue === 'MC');\r\n    }\r\n  }\r\n\r\n  overallStatus() {\r\n    this.courseAttendanceView = false;\r\n    this.studentAttendanceView = false;\r\n    this.noAttendance = false;\r\n  }\r\n\r\n  displayErrorAlert(error) {\r\n    swal(\r\n      error.title,\r\n      error.msg,\r\n      'error'\r\n    );\r\n  }\r\n\r\n  goBack() {\r\n    window.history.back();\r\n  }\r\n}\r\n"]}