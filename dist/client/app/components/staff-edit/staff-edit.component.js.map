{"version":3,"sources":["../../client/app/components/staff-edit/staff-edit.component.ts"],"names":[],"mappings":"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","file":"staff-edit.component.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { User } from \"../../models/User\";\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport { StaffService } from \"../../services/staff.service\";\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n    selector: 'staff-edit',\r\n    templateUrl: './app/components/staff-edit/staff-edit.component.html',\r\n    styleUrls: ['./app/components/staff-edit/staff-edit.component.css']\r\n})\r\n\r\nexport class StaffEditComponent implements OnInit {\r\n    @Input() user: User;\r\n    newUser = false;\r\n    error: any;\r\n    navigated = false; // true if navigated here\r\n\r\n\r\n    constructor(private staffService: StaffService, private route: ActivatedRoute) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.route.params.forEach((params: Params) => {\r\n            let id = params['id'];\r\n            if (id === 'new') {\r\n                this.newUser = true;\r\n                this.user = new User();\r\n            } else {\r\n                this.newUser = false;\r\n                this.staffService.getUser(id).then(user => this.user = user);\r\n            }\r\n        });\r\n    }\r\n\r\n    save() {\r\n      if (this.user.email\r\n        && this.user.firstName\r\n        && this.user.lastName\r\n        && this.user.password\r\n        && this.user.username\r\n        && this.user.authLevel) {\r\n          this.staffService\r\n              .save(this.user)\r\n              .then(user => {\r\n                if (user.error === \"username in use\") {\r\n                  swal(\r\n                      'Username taken',\r\n                      'Please enter a differnet username.',\r\n                      'warning'\r\n                  );\r\n                } else if (user.error === \"incorrect email format\") {\r\n                  swal(\r\n                      'Incorrect email format',\r\n                      'Please enter a proper email.',\r\n                      'warning'\r\n                  );\r\n                }  else if (user.success === \"success\") {\r\n                  this.goBack();\r\n                } else {\r\n                  this.user = user; // saved user, w/ id if new\r\n                  this.goBack();\r\n                }\r\n              })\r\n              .catch(error => this.error = error); // TODO: Display error message\r\n      } else {\r\n        swal(\r\n            'Missing Input',\r\n            'Please enter all information before saving.',\r\n            'warning'\r\n        );\r\n      }\r\n\r\n    }\r\n\r\n    goBack() {\r\n        window.history.back();\r\n    }\r\n}\r\n"]}