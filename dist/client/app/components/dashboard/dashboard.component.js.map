{"version":3,"sources":["../../client/app/components/dashboard/dashboard.component.ts"],"names":[],"mappings":"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","file":"dashboard.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/authentication.service';\r\nimport { Client } from \"../../models/client\";\r\nimport { ClientService } from \"../../services/client.service\";\r\nimport { Student } from \"../../models/student\";\r\nimport { StudentService } from \"../../services/student.service\";\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n    selector: 'dashboard',\r\n    templateUrl: './app/components/dashboard/dashboard.component.html',\r\n    styleUrls: ['./app/components/dashboard/dashboard.component.css']\r\n})\r\n\r\nexport class DashboardComponent implements OnInit {\r\n    client: Client[];\r\n    student: Student[];\r\n\r\n    consentForm: boolean;\r\n    learningStyleForm: boolean;\r\n\r\n    //variables used to toggle dahsboard items\r\n    clientStatus = false;\r\n    manageStudents = false;\r\n    manageStaff = false;\r\n    suitability = false;\r\n    consent = false;\r\n    manageCourses = false;\r\n    caseNotes = false;\r\n    learningStyle = false;\r\n    maesdprf = false;\r\n    timetable = false;\r\n    attendanceList = false;\r\n    attendanceReport = false;\r\n    files = false;\r\n    waitList = false;\r\n    siteActivity = false;\r\n\r\n    userType: any;\r\n\r\n    constructor(private router: Router, private authService: AuthService, private clientService: ClientService,  private studentService: StudentService) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        var currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n        if (!currentUser.active) {\r\n          this.router.navigate(['/reset-password']);\r\n        } else {\r\n          var userType = currentUser.userType;\r\n          var userID = currentUser.userID;\r\n          this.checkAuth(userType, userID);\r\n          this.consentForm = true;\r\n          this.learningStyleForm = true;\r\n        }\r\n    }\r\n\r\n    checkAuth(userType, userID) {\r\n        this.userType = userType;\r\n        if (userType.indexOf('Admin') >= 0) {\r\n            this.clientStatus = true;\r\n            this.manageStudents = true;\r\n            this.manageStaff = true;\r\n            this.suitability = true;\r\n            this.caseNotes = true;\r\n            this.manageCourses = true;\r\n            this.attendanceReport = true;\r\n            this.attendanceList = true;\r\n            this.timetable = true;\r\n            this.consent = true;\r\n            this.learningStyle = true;\r\n            this.files = true;\r\n            this.waitList = true;\r\n            this.siteActivity = true;\r\n        }\r\n        if (userType.indexOf('Staff') >= 0) {\r\n            this.clientStatus = true;\r\n            this.manageStudents = true;\r\n            this.suitability = true;\r\n            this.timetable = true;\r\n            this.caseNotes = true;\r\n            this.manageCourses = true;\r\n            this.attendanceReport = true;\r\n            this.files = true;\r\n            this.waitList = true;\r\n            this.siteActivity = true;\r\n        }\r\n        if (userType.indexOf('Instructor') >= 0) {\r\n            this.attendanceList = true;\r\n            this.attendanceReport = true;\r\n            this.timetable = true;\r\n            this.caseNotes = true;\r\n        }\r\n        if (userType === 'Student') {\r\n            this.timetable = true;\r\n            this.consent = true;\r\n            this.learningStyle = true;\r\n            this.checkFormStatus(userType, userID);\r\n        }\r\n        if (userType === 'Client') {\r\n            this.consent = true;\r\n            this.learningStyle = true;\r\n            //this.maesdprf = true;\r\n            this.checkFormStatus(userType, userID);\r\n        }\r\n    }\r\n\r\n    checkFormStatus(type, userID) {\r\n      swal({\r\n        title: 'Loading...'\r\n      });\r\n      swal.showLoading();\r\n      if (type === 'Client') {\r\n        this.clientService\r\n            .getClient(userID)\r\n            .then(object => {\r\n                if ((object as any).result === \"error\") {\r\n                    this.client = null;\r\n                    this.displayErrorAlert(object);\r\n                } else {\r\n                    this.client = object[0].firstName;\r\n                    this.consentForm = object[0].consent;\r\n                    this.learningStyleForm = object[0].learningStyle;\r\n                    swal.close();\r\n                }\r\n            })\r\n            .catch(error => console.log(error));\r\n      } else if (type === 'Student') {\r\n        this.studentService\r\n            .getStudent(userID)\r\n            .then(object => {\r\n                if ((object as any).result === \"error\") {\r\n                    this.student = null;\r\n                    this.displayErrorAlert(object);\r\n                } else {\r\n                    this.student = object.firstName;\r\n                    this.consentForm = object.consent;\r\n                    this.learningStyleForm = object.learningStyle;\r\n                    swal.close();\r\n                }\r\n            })\r\n            .catch(error => console.log(error));\r\n      }\r\n    }\r\n\r\n    displayErrorAlert(error) {\r\n      if (error.title === \"Auth Error\") {\r\n        this.router.navigate(['/login']);\r\n        swal(\r\n          error.title,\r\n          error.msg,\r\n          'info'\r\n        );\r\n      } else {\r\n        swal(\r\n          error.title,\r\n          error.msg,\r\n          'error'\r\n        );\r\n      }\r\n    }\r\n}\r\n"]}