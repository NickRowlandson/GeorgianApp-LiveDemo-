{"version":3,"sources":["../../client/app/components/reset-password/reset-password.component.ts"],"names":[],"mappings":"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","file":"reset-password.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/authentication.service';\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n    selector: 'consentForm',\r\n    templateUrl: './app/components/reset-password/reset-password.component.html',\r\n    styleUrls: ['./app/components/reset-password/reset-password.component.css']\r\n})\r\n\r\n\r\nexport class ResetPasswordComponent {\r\n  error: any;\r\n  private currentUser: any;\r\n  private password1: string = \"\";\r\n  private password2: string = \"\";\r\n  private email: string;\r\n  showSubmit: boolean = false;\r\n  passLength: boolean = false;\r\n  capital: boolean = false;\r\n  weakPass: boolean = false;\r\n  illegalCharacters: boolean = false;\r\n\r\n\r\n  constructor( private router: Router, private authService: AuthService) {\r\n      this.currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n      if (this.currentUser) {\r\n\r\n      } else {\r\n\r\n      }\r\n  }\r\n\r\n  inputChange() {\r\n    var capitalCount = 0;\r\n    for (var i = 0; i < this.password1.length; i++) {\r\n      if (/[A-Z]/.test(this.password1.charAt(i)))  {\r\n        capitalCount++;\r\n      }\r\n    }\r\n\r\n    if (/^[a-zA-Z0-9- ]*$/.test(this.password1) === false) {\r\n      this.illegalCharacters = true;\r\n    } else {\r\n      this.illegalCharacters = false;\r\n    }\r\n\r\n    if (this.password1.length >= 8 && this.password1.length <= 25) {\r\n      this.passLength = true;\r\n    } else if (this.password1.length > 25) {\r\n      this.passLength = false;\r\n    } else {\r\n      this.passLength = false;\r\n    }\r\n\r\n    if (this.password1.length < 10 && this.password1.length >= 8 && capitalCount < 2 && capitalCount !== 0) {\r\n      this.weakPass = true;\r\n    } else {\r\n      this.weakPass = false;\r\n    }\r\n\r\n    if (capitalCount >= 1) {\r\n      this.capital = true;\r\n    } else {\r\n      this.capital = false;\r\n    }\r\n\r\n    if (this.password1 === this.password2 && this.passLength && this.capital) {\r\n      this.showSubmit = true;\r\n    } else {\r\n      this.showSubmit = false;\r\n    }\r\n  }\r\n\r\n  resetPassword() {\r\n    this.authService.resetPassword(this.currentUser.userID, this.password1)\r\n    .then(result => {\r\n      if (result) {\r\n        this.router.navigate(['/login']);\r\n      } else {\r\n        console.log(\"There was an error with your request...\");\r\n      }\r\n    }).catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  requestReset() {\r\n    if (this.email == null || this.email === \"\") {\r\n      swal(\r\n          'Error',\r\n          'Please enter your email address.',\r\n          'warning'\r\n      );\r\n    } else {\r\n      this.authService.requestReset(this.email)\r\n      .then(result => {\r\n        if (result) {\r\n          this.router.navigate(['/login']);\r\n        } else {\r\n          console.log(\"There was an error with your request...\");\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n      this.router.navigate(['/login']);\r\n  }\r\n}\r\n"]}