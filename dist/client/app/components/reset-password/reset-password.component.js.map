{"version":3,"sources":["../../client/app/components/reset-password/reset-password.component.ts"],"names":[],"mappings":"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","file":"reset-password.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/authentication.service';\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n    selector: 'consentForm',\r\n    templateUrl: './app/components/reset-password/reset-password.component.html',\r\n    styleUrls: ['./app/components/reset-password/reset-password.component.css']\r\n})\r\n\r\n\r\nexport class ResetPasswordComponent {\r\n  error: any;\r\n  private currentUser: any;\r\n  private password1: string = \"\";\r\n  private password2: string = \"\";\r\n  private email: string;\r\n  showSubmit: boolean = false;\r\n  passLength: boolean = false;\r\n  capital: boolean = false;\r\n  weakPass: boolean = false;\r\n  illegalCharacters: boolean = false;\r\n\r\n\r\n  constructor( private router: Router, private authService: AuthService) {\r\n      this.currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n  }\r\n\r\n  inputChange() {\r\n    var capitalCount = 0;\r\n    for (var i = 0; i < this.password1.length; i++) {\r\n      if (/[A-Z]/.test(this.password1.charAt(i)))  {\r\n        capitalCount++;\r\n      }\r\n    }\r\n\r\n    if (/^[a-zA-Z0-9- ]*$/.test(this.password1) === false) {\r\n      this.illegalCharacters = true;\r\n    } else {\r\n      this.illegalCharacters = false;\r\n    }\r\n\r\n    if (this.password1.length >= 8 && this.password1.length <= 25) {\r\n      this.passLength = true;\r\n    } else if (this.password1.length > 25) {\r\n      this.passLength = false;\r\n    } else {\r\n      this.passLength = false;\r\n    }\r\n\r\n    if (this.password1.length < 10 && this.password1.length >= 8 && capitalCount < 2 && capitalCount !== 0) {\r\n      this.weakPass = true;\r\n    } else {\r\n      this.weakPass = false;\r\n    }\r\n\r\n    if (capitalCount >= 1) {\r\n      this.capital = true;\r\n    } else {\r\n      this.capital = false;\r\n    }\r\n\r\n    if (this.password1 === this.password2 && this.passLength && this.capital) {\r\n      this.showSubmit = true;\r\n    } else {\r\n      this.showSubmit = false;\r\n    }\r\n  }\r\n\r\n  resetPassword() {\r\n    this.authService.resetPassword(this.currentUser.userID, this.password1)\r\n    .then(result => {\r\n      if ((result as any).result === 'error') {\r\n        this.displayErrorAlert(result);\r\n      } else if ((result as any).result === 'invalid') {\r\n        swal(\r\n            (result as any).title,\r\n            (result as any).msg,\r\n            'error'\r\n        );\r\n      } else if ((result as any).result === 'success') {\r\n        swal(\r\n            (result as any).title,\r\n            (result as any).msg,\r\n            'success'\r\n        );\r\n        this.router.navigate(['/login']);\r\n        //window.history.back();\r\n      } else {\r\n        console.log(\"There was an error with your request...\");\r\n      }\r\n    }).catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  requestReset() {\r\n    if (this.email == null || this.email === \"\") {\r\n      swal(\r\n          'Error',\r\n          'Please enter your email address.',\r\n          'warning'\r\n      );\r\n    } else {\r\n      this.authService.requestReset(this.email)\r\n      .then(result => {\r\n        if ((result as any).result === 'error') {\r\n          this.displayErrorAlert(result);\r\n        } else if ((result as any).result === 'invalid') {\r\n          swal(\r\n              (result as any).title,\r\n              (result as any).msg,\r\n              'error'\r\n          );\r\n        } else if ((result as any).result === 'success') {\r\n          swal(\r\n              (result as any).title,\r\n              (result as any).msg,\r\n              'success'\r\n          );\r\n          //this.router.navigate(['/login']);\r\n          window.history.back();\r\n        } else {\r\n          console.log(\"There was an error with your request...\");\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  displayErrorAlert(error) {\r\n    swal(\r\n      error.title,\r\n      error.msg,\r\n      'error'\r\n    );\r\n  }\r\n\r\n  goBack() {\r\n      this.router.navigate(['/login']);\r\n  }\r\n}\r\n"]}