{"version":3,"sources":["../../client/app/components/staff-details/staff-details.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAqBE,+BAAoB,YAA0B,EAAU,KAAqB;oBAAzD,iBAAY,GAAZ,YAAY,CAAc;oBAAU,UAAK,GAAL,KAAK,CAAgB;oBAP7E,YAAO,GAAG,KAAK,CAAC;oBAEhB,cAAS,GAAG,KAAK,CAAC,CAAC,yBAAyB;oBAE5C,cAAS,GAAW,EAAE,CAAC;gBAKvB,CAAC;gBAED,wCAAQ,GAAR;oBAAA,iBAsBC;oBArBC,uCAAuC;oBACvC,IAAI,CAAC,UAAU,GAAG;wBAChB,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE;wBAClC,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE;wBAClC,EAAE,KAAK,EAAE,YAAY,EAAE,KAAK,EAAE,YAAY,EAAE;qBAC7C,CAAC;oBACF,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,MAAc;wBACvC,KAAI,CAAC,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;wBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;4BACtB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;4BACpB,KAAI,CAAC,IAAI,GAAG,IAAI,WAAI,EAAE,CAAC;wBACzB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;4BACrB,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;gCAC1C,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;gCACjB,GAAG,CAAC,CAAa,UAA6B,EAA7B,KAAA,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAA7B,cAA6B,EAA7B,IAA6B;oCAAzC,IAAI,IAAI,SAAA;oCACX,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iCAC3B;4BACH,CAAC,CAAC,CAAC;wBACL,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;gBAED,oCAAI,GAAJ;oBAAA,iBAyEC;oBAxEC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;wBAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK;+BACd,IAAI,CAAC,IAAI,CAAC,SAAS;+BACnB,IAAI,CAAC,IAAI,CAAC,QAAQ;+BAClB,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;4BACtC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;4BAC/C,IAAI,CAAC,YAAY;iCACd,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;iCAClB,IAAI,CAAC,UAAA,IAAI;gCACR,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,iBAAiB,CAAC,CAAC,CAAC;oCACrC,IAAI,CACF,gBAAgB,EAChB,oCAAoC,EACpC,SAAS,CACV,CAAC;gCACJ,CAAC;gCAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,cAAc,CAAC,CAAC,CAAC;oCACzC,IAAI,CACF,cAAc,EACd,iCAAiC,EACjC,SAAS,CACV,CAAC;gCACJ,CAAC;gCAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,wBAAwB,CAAC,CAAC,CAAC;oCACnD,IAAI,CACF,wBAAwB,EACxB,8BAA8B,EAC9B,SAAS,CACV,CAAC;gCACJ,CAAC;gCAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;oCACtC,KAAI,CAAC,MAAM,EAAE,CAAC;gCAChB,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,2BAA2B;oCAC7C,KAAI,CAAC,MAAM,EAAE,CAAC;gCAChB,CAAC;4BACH,CAAC,CAAC;iCACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,KAAK,GAAG,KAAK,EAAlB,CAAkB,CAAC,CAAC,CAAC,8BAA8B;wBACvE,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CACF,eAAe,EACf,6CAA6C,EAC7C,SAAS,CACV,CAAC;wBACJ,CAAC;oBACH,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK;+BACd,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;4BACpB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;4BAC/C,IAAI,CAAC,YAAY;iCACd,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC;iCAC1B,IAAI,CAAC,UAAA,IAAI;gCACR,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,wBAAwB,CAAC,CAAC,CAAC;oCAC5C,IAAI,CACF,wBAAwB,EACxB,8BAA8B,EAC9B,SAAS,CACV,CAAC;gCACJ,CAAC;gCAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;oCACtC,KAAI,CAAC,MAAM,EAAE,CAAC;gCAChB,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,2BAA2B;oCAC7C,KAAI,CAAC,MAAM,EAAE,CAAC;gCAChB,CAAC;4BACH,CAAC,CAAC;iCACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,KAAK,GAAG,KAAK,EAAlB,CAAkB,CAAC,CAAC,CAAC,8BAA8B;wBACvE,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CACF,eAAe,EACf,6CAA6C,EAC7C,SAAS,CACV,CAAC;wBACJ,CAAC;oBACH,CAAC;gBAEH,CAAC;gBAED,sCAAM,GAAN;oBACE,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACxB,CAAC;gBAjHQ;oBAAR,YAAK,EAAE;8CAAO,WAAI;mEAAC;gBADT,qBAAqB;oBANjC,gBAAS,CAAC;wBACT,QAAQ,EAAE,YAAY;wBACtB,WAAW,EAAE,6DAA6D;wBAC1E,SAAS,EAAE,CAAC,4DAA4D,CAAC;qBAC1E,CAAC;qDAWkC,4BAAY,EAAiB,uBAAc;mBATlE,qBAAqB,CAmHjC;gBAAD,4BAAC;aAnHD,AAmHC;;QACD,CAAC","file":"staff-details.component.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { User } from \"../../models/User\";\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport { StaffService } from \"../../services/staff.service\";\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n  selector: 'staff-edit',\r\n  templateUrl: './app/components/staff-details/staff-details.component.html',\r\n  styleUrls: ['./app/components/staff-details/staff-details.component.css']\r\n})\r\n\r\nexport class StaffDetailsComponent implements OnInit {\r\n  @Input() user: User;\r\n  newUser = false;\r\n  error: any;\r\n  navigated = false; // true if navigated here\r\n  authLevels: any;\r\n  fselected: any [] = [];\r\n  id: any;\r\n\r\n  constructor(private staffService: StaffService, private route: ActivatedRoute) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    //SelectItem API with label-value pairs\r\n    this.authLevels = [\r\n      { label: 'Admin', value: 'Admin' },\r\n      { label: 'Staff', value: 'Staff' },\r\n      { label: 'Instructor', value: 'Instructor' }\r\n    ];\r\n    this.route.params.forEach((params: Params) => {\r\n      this.id = params['id'];\r\n      if (this.id === 'new') {\r\n        this.newUser = true;\r\n        this.user = new User();\r\n      } else {\r\n        this.newUser = false;\r\n        this.staffService.getUser(this.id).then(user => {\r\n          this.user = user;\r\n          for (let item of this.user.userType.split(',')) {\r\n            this.fselected.push(item);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  save() {\r\n    if (this.newUser === true) {\r\n      if (this.user.email\r\n        && this.user.firstName\r\n        && this.user.lastName\r\n        && this.fselected.toString() !== '') {\r\n        this.user.userType = this.fselected.toString();\r\n        this.staffService\r\n          .saveNew(this.user)\r\n          .then(user => {\r\n            if (user.error === \"username in use\") {\r\n              swal(\r\n                'Username taken',\r\n                'Please enter a different username.',\r\n                'warning'\r\n              );\r\n            } else if (user.error === \"email in use\") {\r\n              swal(\r\n                'Email in use',\r\n                'Please enter a different email.',\r\n                'warning'\r\n              );\r\n            } else if (user.error === \"incorrect email format\") {\r\n              swal(\r\n                'Incorrect email format',\r\n                'Please enter a proper email.',\r\n                'warning'\r\n              );\r\n            } else if (user.success === \"success\") {\r\n              this.goBack();\r\n            } else {\r\n              this.user = user; // saved user, w/ id if new\r\n              this.goBack();\r\n            }\r\n          })\r\n          .catch(error => this.error = error); // TODO: Display error message\r\n      } else {\r\n        swal(\r\n          'Missing Input',\r\n          'Please enter all information before saving.',\r\n          'warning'\r\n        );\r\n      }\r\n    } else {\r\n      if (this.user.email\r\n        && this.fselected) {\r\n        this.user.userType = this.fselected.toString();\r\n        this.staffService\r\n          .update(this.user, this.id)\r\n          .then(user => {\r\n            if (user.error === \"incorrect email format\") {\r\n              swal(\r\n                'Incorrect email format',\r\n                'Please enter a proper email.',\r\n                'warning'\r\n              );\r\n            } else if (user.success === \"success\") {\r\n              this.goBack();\r\n            } else {\r\n              this.user = user; // saved user, w/ id if new\r\n              this.goBack();\r\n            }\r\n          })\r\n          .catch(error => this.error = error); // TODO: Display error message\r\n      } else {\r\n        swal(\r\n          'Missing Input',\r\n          'Please enter all information before saving.',\r\n          'warning'\r\n        );\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  goBack() {\r\n    window.history.back();\r\n  }\r\n}\r\n"]}