{"version":3,"sources":["../../client/app/components/case-notes/case-notes.component.ts"],"names":[],"mappings":"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","file":"case-notes.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { StudentService } from \"../../services/student.service\";\r\nimport { Student } from \"../../models/student\";\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n  selector: 'caseNotes',\r\n  templateUrl: './app/components/case-notes/case-notes.component.html',\r\n  styleUrls: ['./app/components/case-notes/case-notes.component.css']\r\n})\r\n\r\nexport class CaseNotesComponent implements OnInit {\r\n  data: any[];\r\n  notes: any[];\r\n  notesView: Student;\r\n  note: any;\r\n  newNote: boolean;\r\n  status: any;\r\n  error: any;\r\n\r\n  constructor(private router: Router, private studentService: StudentService) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getStudents();\r\n  }\r\n\r\n  getStudents() {\r\n    this.studentService\r\n      .getStudents()\r\n      .then(students => {\r\n        if ((students as any).status === \"403\") {\r\n          this.data = null;\r\n        } else {\r\n          this.data = students;\r\n          for (let student of this.data) {\r\n            student.fullName = student.firstName + \" \" + student.lastName;\r\n          }\r\n        }\r\n      })\r\n      .catch(error => this.error = error);\r\n  }\r\n\r\n  saveNote(studentID) {\r\n    console.log(this.note);\r\n    this.studentService\r\n        .saveNewNote(this.note, studentID)\r\n        .then(note => {\r\n            this.note = '';\r\n            this.showNotes(studentID);\r\n        })\r\n        .catch(error => this.error = error); // TODO: Display error message\r\n\r\n    this.newNote = false;\r\n  }\r\n\r\n  showCaseNotes(student: Student) {\r\n    this.notesView = student;\r\n    this.showNotes(student.studentID);\r\n  }\r\n\r\n  showNotes(studentID) {\r\n    this.studentService\r\n        .getNotes(studentID)\r\n        .then(notes => {\r\n          this.notes = notes;\r\n        })\r\n        .catch(error => console.log(error));\r\n  }\r\n\r\n  deleteNote(noteID) {\r\n      event.stopPropagation();\r\n      this.studentService\r\n          .deleteNote(noteID)\r\n          .then(res => {\r\n              this.notes = this.notes.filter(h => h.caseNoteID !== noteID);\r\n              swal(\r\n                  'Deleted!',\r\n                  'Case note has been successfully removed.',\r\n                  'success'\r\n              );\r\n          })\r\n          .catch(error => this.error = error);\r\n  }\r\n\r\n  deleteAlert(noteID) {\r\n      swal({\r\n          title: 'Delete note?',\r\n          text: \"You won't be able to revert this!\",\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          confirmButtonText: 'Yes, delete it!'\r\n      }).then(isConfirm => {\r\n        if (isConfirm) {\r\n          this.deleteNote(noteID);\r\n        }\r\n      }).catch(error => {\r\n        //console.log(\"Canceled\");\r\n      });\r\n  }\r\n\r\n  goBack() {\r\n    window.history.back();\r\n  }\r\n}\r\n"]}