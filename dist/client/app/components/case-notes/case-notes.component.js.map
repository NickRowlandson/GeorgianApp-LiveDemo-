{"version":3,"sources":["../../client/app/components/case-notes/case-notes.component.ts"],"names":[],"mappings":"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","file":"case-notes.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { StudentService } from \"../../services/student.service\";\r\nimport { Student } from \"../../models/student\";\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n  selector: 'caseNotes',\r\n  templateUrl: './app/components/case-notes/case-notes.component.html',\r\n  styleUrls: ['./app/components/case-notes/case-notes.component.css']\r\n})\r\n\r\nexport class CaseNotesComponent implements OnInit {\r\n  data: any[];\r\n  notes: any[];\r\n  notesView: Student;\r\n  note: any;\r\n  newNote: boolean;\r\n  status: any;\r\n  error: any;\r\n\r\n  constructor(private router: Router, private studentService: StudentService) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getStudents();\r\n  }\r\n\r\n  getStudents() {\r\n    this.studentService\r\n      .getStudents()\r\n      .then(students => {\r\n        if ((students as any).result === 'error') {\r\n          this.data = null;\r\n          this.displayErrorAlert(students);\r\n        } else {\r\n          this.data = students;\r\n          for (let student of this.data) {\r\n            student.fullName = student.firstName + \" \" + student.lastName;\r\n          }\r\n        }\r\n      })\r\n      .catch(error => this.error = error);\r\n  }\r\n\r\n  saveNote(studentID) {\r\n    if (this.note == null) {\r\n      swal(\r\n        'Empty Input',\r\n        'Type something in the text area to save new note.',\r\n        'warning'\r\n      );\r\n    } else {\r\n      this.studentService\r\n          .saveNewNote(this.note, studentID)\r\n          .then(note => {\r\n            console.log(note);\r\n            if ((note as any).result === 'error') {\r\n              this.displayErrorAlert(note);\r\n            } else if ((note as any).result === 'success') {\r\n              console.log(\"is work\");\r\n              this.note = '';\r\n              this.showNotes(studentID);\r\n            } else {\r\n              swal(\r\n                'Error',\r\n                'Something went wrong, please try again.',\r\n                'error'\r\n              );\r\n            }\r\n          })\r\n          .catch(error => this.error = error); // TODO: Display error message\r\n\r\n      this.newNote = false;\r\n    }\r\n  }\r\n\r\n  showCaseNotes(student: Student) {\r\n    this.notesView = student;\r\n    this.showNotes(student.studentID);\r\n  }\r\n\r\n  showNotes(studentID) {\r\n    this.studentService\r\n        .getNotes(studentID)\r\n        .then(notes => {\r\n          if ((notes as any).result === 'error') {\r\n            this.displayErrorAlert(notes);\r\n          } else {\r\n            this.notes = notes;\r\n          }\r\n        })\r\n        .catch(error => console.log(error));\r\n  }\r\n\r\n  deleteNote(noteID) {\r\n      event.stopPropagation();\r\n      this.studentService\r\n          .deleteNote(noteID)\r\n          .then(result => {\r\n            if ((result as any).result === 'error') {\r\n              this.displayErrorAlert(result);\r\n            } else if ((result as any).result === 'success') {\r\n              this.notes = this.notes.filter(h => h.caseNoteID !== noteID);\r\n            } else {\r\n              swal(\r\n                'Error',\r\n                'Something went wrong, please try again.',\r\n                'error'\r\n              );\r\n            }\r\n          })\r\n          .catch(error => this.error = error);\r\n  }\r\n\r\n  deleteAlert(noteID) {\r\n      swal({\r\n          title: 'Delete note?',\r\n          text: \"You won't be able to revert this!\",\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          confirmButtonText: 'Yes, delete it!'\r\n      }).then(isConfirm => {\r\n        if (isConfirm.dismiss === \"cancel\" || isConfirm.dismiss === \"overlay\") {\r\n          console.log(isConfirm.dismiss);\r\n        } else if (isConfirm) {\r\n          this.deleteNote(noteID);\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  displayErrorAlert(error) {\r\n    swal(\r\n      error.title,\r\n      error.msg,\r\n      'error'\r\n    );\r\n  }\r\n\r\n  goBack() {\r\n    window.history.back();\r\n  }\r\n}\r\n"]}