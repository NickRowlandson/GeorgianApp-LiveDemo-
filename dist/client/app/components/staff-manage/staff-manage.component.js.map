{"version":3,"sources":["../../client/app/components/staff-manage/staff-manage.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;gBAuBI,8BAAoB,MAAc,EAAU,YAA0B;oBAAlD,WAAM,GAAN,MAAM,CAAQ;oBAAU,iBAAY,GAAZ,YAAY,CAAc;gBAEtE,CAAC;gBAED,uCAAQ,GAAR;oBACI,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACpB,CAAC;gBAED,uCAAQ,GAAR;oBAAA,iBAiBC;oBAhBG,IAAI,CAAC,YAAY;yBACd,QAAQ,EAAE;yBACV,IAAI,CAAC,UAAA,KAAK;wBACT,EAAE,CAAC,CAAE,KAAa,CAAC,MAAM,KAAK,KAAK,CAAC,CAAC,CAAC;4BACpC,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;wBACpB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;4BACnB,GAAG,CAAC,CAAa,UAAU,EAAV,KAAA,KAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;gCAAtB,IAAI,IAAI,SAAA;gCACX,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;6BACtD;4BACD,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,KAAK,CAAC;4BAC9B,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC;4BAChC,KAAI,CAAC,WAAW,EAAE,CAAC;wBACrB,CAAC;oBACH,CAAC,CAAC;yBACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,KAAK,GAAG,KAAK,EAAlB,CAAkB,CAAC,CAAC;gBAC1C,CAAC;gBAED,uCAAQ,GAAR,UAAS,IAAU,EAAE,KAAU;oBAC3B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACxD,CAAC;gBAED,sCAAO,GAAP;oBACI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC,CAAC;gBACjD,CAAC;gBAED,0CAAW,GAAX,UAAY,IAAU,EAAE,KAAU;oBAAlC,iBAkBC;oBAjBG,IAAI,CAAC;wBACD,KAAK,EAAE,eAAe,GAAG,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI;wBACpE,IAAI,EAAE,mCAAmC;wBACzC,IAAI,EAAE,SAAS;wBACf,gBAAgB,EAAE,IAAI;wBACtB,kBAAkB,EAAE,SAAS;wBAC7B,iBAAiB,EAAE,MAAM;wBACzB,iBAAiB,EAAE,cAAc;qBACpC,CAAC,CAAC,IAAI,CAAC,UAAA,SAAS;wBACf,EAAE,CAAC,CAAC,SAAS,CAAC,OAAO,KAAK,QAAQ,IAAI,SAAS,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;4BACtE,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;wBACjC,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;4BACrB,KAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;wBAC/B,CAAC;oBACH,CAAC,CAAC,CAAC,KAAK,CAAC,UAAA,KAAK;wBACZ,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oBACrB,CAAC,CAAC,CAAC;gBACP,CAAC;gBAED,yCAAU,GAAV,UAAW,IAAU,EAAE,KAAU;oBAAjC,iBAgBC;oBAfG,KAAK,CAAC,eAAe,EAAE,CAAC;oBACxB,IAAI,CAAC,YAAY;yBACd,MAAM,CAAC,IAAI,CAAC;yBACZ,IAAI,CAAC,UAAA,GAAG;wBACL,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,KAAK,IAAI,EAAV,CAAU,CAAC,CAAC;wBAChD,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,KAAK,CAAC;wBAC9B,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC;wBACrC,KAAI,CAAC,WAAW,EAAE,CAAC;wBACnB,IAAI,CACA,UAAU,EACV,wBAAwB,EACxB,SAAS,CACZ,CAAC;oBACN,CAAC,CAAC;yBACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,KAAK,GAAG,KAAK,EAAlB,CAAkB,CAAC,CAAC;gBAC1C,CAAC;gBAED,0CAAW,GAAX;oBACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,OAAO,EAAtB,CAAsB,CAAC,CAAC;oBAClE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,OAAO,EAAtB,CAAsB,CAAC,CAAC;oBAClE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,YAAY,EAA3B,CAA2B,CAAC,CAAC;oBAC5E,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC;gBACvD,CAAC;gBAED,0CAAW,GAAX,UAAY,QAAQ;oBAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;oBAC9B,EAAE,CAAC,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,CAAC;wBACzB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;oBAChC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,KAAK,QAAQ,EAAvB,CAAuB,CAAC,CAAC;oBAC/D,CAAC;gBACH,CAAC;gBAED,qCAAM,GAAN;oBACI,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBAC1B,CAAC;gBAtGQ,oBAAoB;oBAPhC,gBAAS,CAAC;wBACP,QAAQ,EAAE,cAAc;wBACxB,WAAW,EAAE,2DAA2D;wBACxE,SAAS,EAAE,CAAC,0DAA0D,CAAC;qBAC1E,CAAC;qDAY8B,eAAM,EAAwB,4BAAY;mBAT7D,oBAAoB,CAuGhC;gBAAD,2BAAC;aAvGD,AAuGC;;QACD,CAAC","file":"staff-manage.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { StaffService } from \"../../services/staff.service\";\r\nimport { User } from \"../../models/user\";\r\nimport { Router } from '@angular/router';\r\ndeclare var swal: any;\r\n\r\n\r\n@Component({\r\n    selector: 'staff-manage',\r\n    templateUrl: './app/components/staff-manage/staff-manage.component.html',\r\n    styleUrls: ['./app/components/staff-manage/staff-manage.component.css']\r\n})\r\n\r\n\r\nexport class StaffManageComponent implements OnInit {\r\n    users: User[];\r\n    usersBackup: User[];\r\n    error: any;\r\n    usersLength: any;\r\n    adminNumber: any;\r\n    staffNumber: any;\r\n    instructorNumber: any;\r\n\r\n    constructor(private router: Router, private staffService: StaffService) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.getUsers();\r\n    }\r\n\r\n    getUsers() {\r\n        this.staffService\r\n          .getUsers()\r\n          .then(users => {\r\n            if ((users as any).status === \"403\") {\r\n              this.users = null;\r\n            } else {\r\n              this.users = users;\r\n              for (let user of this.users) {\r\n                user.fullName = user.firstName + \" \" + user.lastName;\r\n              }\r\n              this.usersBackup = this.users;\r\n              this.usersLength = users.length;\r\n              this.updateStats();\r\n            }\r\n          })\r\n          .catch(error => this.error = error);\r\n    }\r\n\r\n    gotoEdit(user: User, event: any) {\r\n        this.router.navigate(['/staff-edit', user.staffID]);\r\n    }\r\n\r\n    addUser() {\r\n        this.router.navigate(['/staff-edit', 'new']);\r\n    }\r\n\r\n    deleteAlert(user: User, event: any) {\r\n        swal({\r\n            title: 'Delete user (' + user.firstName + ' ' + user.lastName + ')?',\r\n            text: \"You won't be able to revert this!\",\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, delete!'\r\n        }).then(isConfirm => {\r\n          if (isConfirm.dismiss === \"cancel\" || isConfirm.dismiss === \"overlay\") {\r\n            console.log(isConfirm.dismiss);\r\n          } else if (isConfirm) {\r\n            this.deleteUser(user, event);\r\n          }\r\n        }).catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n\r\n    deleteUser(user: User, event: any) {\r\n        event.stopPropagation();\r\n        this.staffService\r\n          .delete(user)\r\n          .then(res => {\r\n              this.users = this.users.filter(h => h !== user);\r\n              this.usersBackup = this.users;\r\n              this.usersLength = this.users.length;\r\n              this.updateStats();\r\n              swal(\r\n                  'Deleted!',\r\n                  'User has been deleted.',\r\n                  'success'\r\n              );\r\n          })\r\n          .catch(error => this.error = error);\r\n    }\r\n\r\n    updateStats() {\r\n      this.adminNumber = this.users.filter(x => x.userType === \"Admin\");\r\n      this.adminNumber = this.adminNumber.length;\r\n      this.staffNumber = this.users.filter(x => x.userType === \"Staff\");\r\n      this.staffNumber = this.staffNumber.length;\r\n      this.instructorNumber = this.users.filter(x => x.userType === \"Instructor\");\r\n      this.instructorNumber = this.instructorNumber.length;\r\n    }\r\n\r\n    filterStaff(userType) {\r\n      this.users = this.usersBackup;\r\n      if (userType === 'total') {\r\n        this.users = this.usersBackup;\r\n      } else {\r\n        this.users = this.users.filter(x => x.userType === userType);\r\n      }\r\n    }\r\n\r\n    goBack() {\r\n        window.history.back();\r\n    }\r\n}\r\n"]}