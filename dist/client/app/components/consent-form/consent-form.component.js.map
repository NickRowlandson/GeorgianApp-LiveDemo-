{"version":3,"sources":["../../client/app/components/consent-form/consent-form.component.ts"],"names":[],"mappings":"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","file":"consent-form.component.js","sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ConsentForm } from \"../../models/consentForm\";\r\nimport { ClientService } from \"../../services/client.service\";\r\nimport { AuthService } from '../../services/authentication.service';\r\ndeclare var swal: any;\r\n\r\n@Component({\r\n    selector: 'consentForm',\r\n    templateUrl: './app/components/consent-form/consent-form.component.html',\r\n    styleUrls: ['./app/components/consent-form/consent-form.component.css']\r\n})\r\n\r\n\r\nexport class ConsentFormComponent {\r\n  @Input() consentForm: ConsentForm;\r\n  error: any;\r\n  date: any;\r\n  clientName: string = '';\r\n  completeConsentForm: boolean;\r\n  currentUser: any;\r\n  otherChecked: boolean = false;\r\n  loading: boolean = true;\r\n\r\n  constructor(private clientService: ClientService, private router: Router, private authService: AuthService) {\r\n      this.currentUser = JSON.parse(localStorage.getItem('currentUser'));\r\n      var userID = this.currentUser.userID;\r\n      this.date = new Date();\r\n      this.consentForm = new ConsentForm();\r\n\r\n      if (this.currentUser.userType !== \"Client\") {\r\n        this.completeConsentForm = true;\r\n        this.loading = false;\r\n        swal(\r\n            'Read Only',\r\n            \"You are logged in as '\" + this.currentUser.userType + \"'. Only clients can submit this form.\",\r\n            'warning'\r\n        );\r\n      } else {\r\n        this.clientService\r\n        .getClient(userID)\r\n        .then(result => {\r\n          this.clientName = result.client[0].firstName + \" \" + result.client[0].lastName;\r\n          this.completeConsentForm = result.client[0].consent;\r\n          if (!result.client[0].consent) {\r\n            this.clientService\r\n            .getConsentById()\r\n            .then(result => {\r\n              this.consentForm = result[0];\r\n              this.loading = false;\r\n              swal(\r\n                  'Read Only',\r\n                  \"You have already submitted this form. Select 'Request to Edit' if you would like to make changes.\",\r\n                  'warning'\r\n              );\r\n              console.log(this.completeConsentForm);\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n            if (this.consentForm.other == null || this.consentForm.other === '') {\r\n              this.otherChecked = false;\r\n            } else {\r\n              this.otherChecked = true;\r\n            }\r\n          } else {\r\n            this.consentForm.ontarioWorks = false;\r\n            this.consentForm.ontarioDisabilityProgram = false;\r\n            this.consentForm.employmentInsurance = false;\r\n            this.consentForm.employmentServices = false;\r\n            this.consentForm.wsib = false;\r\n            this.loading = false;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n      }\r\n  }\r\n\r\n  saveConsent() {\r\n    // if (!this.consentForm.allowDetailedMessage) {\r\n    //   if (!this.consentForm.alternateNumber) {\r\n    //     swal(\r\n    //         'Whoops!',\r\n    //         'Please enter an alternate phone number.',\r\n    //         'warning'\r\n    //     );\r\n    //   } else {\r\n    //     if (!this.consentForm.contactName || !this.consentForm.contactNum ) {\r\n    //       swal(\r\n    //           'Whoops!',\r\n    //           'Please fill out all form fields.',\r\n    //           'warning'\r\n    //       );\r\n    //     } else {\r\n    //       this.consentForm.date = this.date;\r\n    //       this.clientService\r\n    //           .saveConsent(this.consentForm)\r\n    //           .then(client => {\r\n    //               this.router.navigate(['/dashboard']);\r\n    //           })\r\n    //           .catch(error => this.error = error);\r\n    //     }\r\n    //   }\r\n    // } else {\r\n    //   if (!this.consentForm.contactName || !this.consentForm.contactNum ) {\r\n    //     swal(\r\n    //         'Whoops!',\r\n    //         'Please fill out all form fields.',\r\n    //         'warning'\r\n    //     );\r\n    //   } else {\r\n    //     this.consentForm.date = this.date;\r\n    //     this.clientService\r\n    //         .saveConsent(this.consentForm)\r\n    //         .then(client => {\r\n    //             this.router.navigate(['/dashboard']);\r\n    //         })\r\n    //         .catch(error => this.error = error);\r\n    //   }\r\n    // }\r\n    this.consentForm.date = this.date;\r\n    this.clientService\r\n        .saveConsent(this.consentForm)\r\n        .then(client => {\r\n            this.router.navigate(['/dashboard']);\r\n        })\r\n        .catch(error => this.error = error);\r\n  }\r\n\r\n  requestEdit() {\r\n\r\n  }\r\n\r\n  goBack() {\r\n      window.history.back();\r\n  }\r\n\r\n}\r\n"]}