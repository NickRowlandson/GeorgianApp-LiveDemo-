{"version":3,"sources":["../../client/app/components/course-manage/course-manage.component.ts"],"names":[],"mappings":"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","file":"course-manage.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CourseService } from \"../../services/course.service\";\r\nimport { Course } from \"../../models/course\";\r\nimport { SelectItem } from 'primeng/primeng';\r\ndeclare var swal: any;\r\ndeclare var moment: any;\r\n\r\n@Component({\r\n  selector: 'courseManage',\r\n  templateUrl: './app/components/course-manage/course-manage.component.html',\r\n  styleUrls: ['./app/components/course-manage/course-manage.component.css']\r\n})\r\n\r\n\r\nexport class CourseManageComponent implements OnInit {\r\n  courses: Course[];\r\n  error: any;\r\n  Campus: string[];\r\n  campusId: any;\r\n  professors: any[] = [];\r\n  //dropdown\r\n  campuses: SelectItem[] = [{ label: ' -- All --', value: '' }];\r\n  selectedCampusId: string;\r\n\r\n  constructor(private router: Router, private CourseService: CourseService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    swal({\r\n      title: 'Loading...',\r\n      allowOutsideClick: false\r\n    });\r\n    swal.showLoading();\r\n    this.getInstructors();\r\n    this.getCampuses();\r\n    this.getCourses();\r\n  }\r\n\r\n  getCampuses() {\r\n    this.CourseService\r\n    .getCampuses()\r\n    .then(res => {\r\n      if ((res as any).result === \"error\") {\r\n        this.displayErrorAlert(res);\r\n      } else {\r\n        res.forEach((i) => {\r\n          this.campuses.push({\r\n            label: i.campusName,\r\n            value: i.campusId\r\n          });\r\n        });\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  getInstructors() {\r\n    this.CourseService\r\n    .getInstructors()\r\n    .then((result) => {\r\n      this.professors = result;\r\n    });\r\n  }\r\n\r\n  getCourses() {\r\n    this.CourseService\r\n      .getCourses()\r\n      .then(res => {\r\n        if ((res as any).result === \"error\") {\r\n          this.courses = null;\r\n          this.displayErrorAlert(res);\r\n        } else {\r\n          //format datetime\r\n          res.forEach((item) => {\r\n            item.courseStart = moment(item.courseStart).utcOffset(60).format('YYYY-MM-DD');\r\n            item.courseEnd = moment(item.courseEnd).utcOffset(60).format('YYYY-MM-DD');\r\n          });\r\n          this.courses = res;\r\n          swal.close();\r\n        }\r\n      })\r\n      .catch(error => this.error = error);\r\n  }\r\n\r\n  deleteAlert(course: Course, event: any) {\r\n    swal({\r\n      title: 'Delete course (' + course.courseName + ')?',\r\n      text: \"You won't be able to revert this!\",\r\n      type: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Yes, delete it!'\r\n    }).then(isConfirm => {\r\n      if (isConfirm.dismiss === \"cancel\" || isConfirm.dismiss === \"overlay\") {\r\n        console.log(isConfirm.dismiss);\r\n      } else if (isConfirm) {\r\n        this.deleteCourse(course, event);\r\n      }\r\n    }).catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  deleteCourse(course: Course, event: any) {\r\n    event.stopPropagation();\r\n    this.CourseService\r\n      .delete(course)\r\n      .then(res => {\r\n        if ((res as any).result === \"error\") {\r\n          this.displayErrorAlert(res);\r\n        } else if ((res as any).result === \"success\") {\r\n          this.courses = this.courses.filter(h => h !== course);\r\n          swal(\r\n            'Deleted!',\r\n            'Course record has been deleted.',\r\n            'success'\r\n          );\r\n        } else {\r\n          swal(\r\n              'Error',\r\n              'Something went wrong, please try again.',\r\n              'error'\r\n          );\r\n        }\r\n      })\r\n      .catch(error => this.error = error);\r\n  }\r\n\r\n  gotoEdit(course: Course, event: any) {\r\n    this.router.navigate(['/course-edit', course.courseID]);\r\n  }\r\n\r\n  addCourse() {\r\n    this.router.navigate(['/course-edit', 'new']);\r\n  }\r\n\r\n  gotoStudentEnrollment(course: Course, event: any) {\r\n    this.router.navigate(['/student-enrollment', course.courseID, course.professorId, course.courseName]);\r\n  }\r\n\r\n  filterCampus(cam) {\r\n    this.campusId = this.Campus.indexOf(cam) + 1;\r\n  }\r\n\r\n  displayErrorAlert(error) {\r\n    swal(\r\n      error.title,\r\n      error.msg,\r\n      'error'\r\n    );\r\n  }\r\n\r\n  goBack() {\r\n    window.history.back();\r\n  }\r\n\r\n}\r\n"]}