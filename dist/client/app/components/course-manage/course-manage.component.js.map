{"version":3,"sources":["../../client/app/components/course-manage/course-manage.component.ts"],"names":[],"mappings":"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","file":"course-manage.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CourseService } from \"../../services/course.service\";\r\nimport { Course } from \"../../models/course\";\r\nimport { SelectItem } from 'primeng/primeng';\r\ndeclare var swal: any;\r\ndeclare var moment: any;\r\n\r\n@Component({\r\n    selector: 'courseManage',\r\n    templateUrl: './app/components/course-manage/course-manage.component.html',\r\n    styleUrls: ['./app/components/course-manage/course-manage.component.css']\r\n})\r\n\r\n\r\nexport class CourseManageComponent implements OnInit {\r\n    courses: Course[];\r\n    error: any;\r\n    Campus: string[];\r\n    campusId: any;\r\n    professors: any[] = [];\r\n    //dropdown\r\n    campuses: SelectItem[] = [{ label: ' -- All --', value: '' }];\r\n    selectedCampusId: string;\r\n\r\n    constructor(private router: Router, private CourseService: CourseService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        // console.log(moment().format('YYYY-MM-DD hh:mm A'));\r\n        this.getProfessors();\r\n        this.getCampuses();\r\n        this.getCourses();\r\n    }\r\n\r\n    getCampuses() {\r\n        // get campuses\r\n        this.CourseService.getCampuses().then((result) => {\r\n            result.forEach((i) => {\r\n                this.campuses.push({\r\n                    label: i.campusName,\r\n                    value: i.campusId\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    getProfessors() {\r\n        // get professors\r\n        this.CourseService.getProfessors().then((result) => {\r\n            this.professors = result;\r\n        });\r\n    }\r\n    getCourses() {\r\n        this.CourseService\r\n            .getCourses()\r\n            .then(result => {\r\n                if ((result as any).status === \"403\") {\r\n                    this.courses = null;\r\n                } else {\r\n                    //format datetime\r\n                    result.forEach((item) => {\r\n                        item.courseStart = moment(item.courseStart).utcOffset(60).format('YYYY-MM-DD');\r\n                        item.courseEnd = moment(item.courseEnd).utcOffset(60).format('YYYY-MM-DD');\r\n                    });\r\n                    this.courses = result;\r\n\r\n\r\n                }\r\n            })\r\n            .catch(error => this.error = error);\r\n    }\r\n\r\n    deleteAlert(course: Course, event: any) {\r\n        swal({\r\n            title: 'Delete course (' + course.courseName + ')?',\r\n            text: \"You won't be able to revert this!\",\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, delete it!'\r\n        }).then(isConfirm => {\r\n          if (isConfirm.dismiss === \"cancel\" || isConfirm.dismiss === \"overlay\") {\r\n            console.log(isConfirm.dismiss);\r\n          } else if (isConfirm) {\r\n            this.deleteCourse(course, event);\r\n          }\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    deleteCourse(course: Course, event: any) {\r\n        event.stopPropagation();\r\n        this.CourseService\r\n            .delete(course)\r\n            .then(res => {\r\n                this.courses = this.courses.filter(h => h !== course);\r\n                swal(\r\n                    'Deleted!',\r\n                    'Course record has been deleted.',\r\n                    'success'\r\n                );\r\n            })\r\n            .catch(error => this.error = error);\r\n    }\r\n\r\n    gotoEdit(course: Course, event: any) {\r\n\r\n        this.router.navigate(['/course-edit', course.courseID]);\r\n    }\r\n\r\n    addCourse() {\r\n\r\n        this.router.navigate(['/course-edit', 'new']);\r\n    }\r\n\r\n    gotoStudentEnrollment(course: Course, event: any) {\r\n        this.router.navigate(['/student-enrollment', course.courseID, course.professorId, course.courseName]);\r\n    }\r\n\r\n    goBack() {\r\n        window.history.back();\r\n    }\r\n    filterCampus(cam) {\r\n        this.campusId = this.Campus.indexOf(cam) + 1;\r\n\r\n    }\r\n\r\n}\r\n"]}